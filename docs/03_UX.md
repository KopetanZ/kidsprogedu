# 03_UX.md — UXフロー & 画面仕様（初版）

## ユーザーフロー（MVP）
Home → LessonList → Editor → Play（実行）→ Clear → Home / 次へ

## 画面ワイヤ（テキスト）
- **Home**：おおきな「れっすん」「さくひん」ボタン。ねこガイド常駐。
- **LessonList**：カード型 14件。未クリアは鍵アイコンなし（順不同で可）。
- **Editor**：
  - 上：ステージ（Canvas）
  - 中：コードレーン（ブロックを横に並べる）
  - 下：ブロックパレット（左右スワイプでカテゴリ切替不要／カテゴリ最小）
  - 右上：実行／リセット／ヒント（音声）
- **Clear**：花丸アニメ、アンロック演出。次へ／やりなおす。

## 操作規範
- タッチ領域：**44px以上**
- ドラッグ距離：最短16pxでドロップ成立
- アンドゥ：直近3操作

## 音声ガイド
- トリガ：ヒントボタン／初回入場時自動1回
- 長さ：3–5秒、ひらがな中心
- 台本格納：`/content/voice/ja.json`

## アクセシビリティ
- コントラスト比 4.5:1 以上相当の配色を優先
- 音声OFFでも必ずテキストヒント表示

## 画面テキスト（ひな形/ひらがな）
- Home: 「れっすん」「さくひん」
- LessonCard: 「L1-1 みぎへ いこう」
- Editor: 実行「▶︎」, リセット「↺」, ヒント「?」
- Clear: 「やったね！」「つぎへ」「もう いちど」

---

## 実装に向けた追補（Implementation-Ready）

- レイアウト寸法（iPad 横 1024×768 基準）:
  - ステージ(Canvas): 上部高さ 360–420px, 幅100%（左右16px余白）。
  - コードレーン: 中央高さ 140–160px。横スクロール可。ブロック高さ 56px。
  - パレット: 下部高さ 140–160px。カテゴリ分けせず横スワイプで全ブロック閲覧。
- 操作詳細:
  - ドラッグ開始しきい値 16px、ドロップスナップは8pxグリッド。
  - アンドゥ: 直近3操作（追加/削除/並べ替え）。UIは⟲ボタン（56×56）。
  - 実行: 右上の再生（みどり）56×56。停止/リセット（灰色）, ヒント（?）併設。
  - 5タップ導線: Home(れっすん)→LessonList(カード)→Editor(開始)→ブロック配置→実行。
- フォーカス/音声:
  - 初回入場時は自動ヒント再生（1回のみ）。再生中は再発火を抑制（3秒デバウンス）。
  - 音声OFF時はヒントテキストをステージ下にトースト表示（3秒）。
- ステージ仕様:
  - グリッド 8×5、タイル 64px基準。キャラはマス中央へスナップ移動。
  - 衝突/ゴールはタイル中心で判定。到達時は花丸演出（簡易）。
- エンプティ/エラー状態:
  - ブロック0の実行時: 「ぶろっくを おいて ためしてみよう」トースト。
  - 不正ブロック: 追加不可（パレット側で無効化）。
- DoD（UX）:
  - 44px以上のタッチ領域確認、5タップ導線到達、Undoが2手以内、音声OFF代替表示。
